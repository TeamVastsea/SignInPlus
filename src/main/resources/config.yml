######################################################### 
# SignInPlus 插件配置文件 (默认示例) 
# 说明: 本文件包含所有可配置选项与默认示例 
# 注意: 修改后请使用 /signinplus reload 重载配置 
######################################################### 

######################################################### 
# 数据存储配置 
# 可选数据库: sqlite, mysql, postgresql 
# - 默认 sqlite (无需额外配置) 
# - 使用 mysql 或 postgresql 时需填写以下信息 
######################################################### 
database:
  # sqlite: vast_pay.db / postgresql: localhost:5432/vast_pay / mysql: localhost:3306/vast_pay
  url: localhost:5432/your_database
  # sqlite / postgresql / mysql
  type: sqlite
  # sqlite: You can leave username and password empty
  username: vastPay
  password: vastPay
######################################################### 
# 默认签到奖励 
# 玩家签到后触发的动作，支持多种动作类型： 
# - [COMMAND]   执行指令 (支持占位符 %player_name%) 
# - [SOUND]     播放音效 [种类 音量 pitch] 
# - [ITEM]      给予物品 [物品 数量 NBT] 
# - [SLEEP]     延迟 (单位: ticks, 20ticks = 1s) 
# - [EFFECT]    添加状态效果 [种类 等级 时间(秒)] 
# - [MESSAGE]   发送消息 [消息] 
# - [TITLE]     发送标题 [文字] 
# - [BROADCAST] 广播消息 [消息] 
# - [POINTS]    给予积分 [数量 格式] 
# 
# 概率触发： 
# - [PROB=X]    按概率触发 [概率] 
# - [RANDOM_WEIGHTED] 起始权重列表块 
# - [WEIGHT=X]  按权重触发 [权重] 
# - [/RANDOM_WEIGHTED] 结束权重列表块 
# - [RANDOM_PICK=X] 起始随机互斥抽取列表块 
# - [/RANDOM_PICK] 结束随机互斥抽取列表块 
######################################################### 
default: 
  actions:
    # 默认用法
    - "[COMMAND] give %player_name% apple 64"
    - "[SOUND] ENTITY_PLAYER_LEVELUP 0.5 1.0"
    - "[ITEM] apple 64"
    - "[BROADCAST] %player_name% &6今日已签到！"
    - "[TITLE] &c签到成功！"
    - "[SLEEP] 20"
    - "[EFFECT] speed 2 10"
    
    # 物品NBT
    # 1. ✅ 正常附魔: 给予一把附魔了“耐久 III”的钻石剑
    - '[ITEM] DIAMOND_SWORD 1 {Enchantments:[{id:"minecraft:unbreaking",lvl:3s}]}'
    # 2. ✅ 复杂 NBT (自定义名称和 Lore): 给予一个名为“生命金苹果”并带有描述的特殊金苹果
    - '[ITEM] GOLDEN_APPLE 1 {"display":{"Name":"{\"text\":\"生命金苹果\",\"color\":\"gold\",\"italic\":false}","Lore":["{\"text\":\"一个特殊的苹果！\",\"color\":\"yellow\"}"]}}'
    # 3. ✅ 复杂 NBT (书): 给予一本有标题、作者和内容的成书
    - '[ITEM] WRITTEN_BOOK 1 {title:"我的故事",author:"史蒂夫",pages:["{\"text\":\"第一页的内容。\"}","{\"text\":\"第二页更加精彩！\"}"]}'
    # 4. ⚠️ 非法 NBT: 尝试给予一个带有错误 NBT 的石头。预期结果：玩家收到一个普通的石头，并在聊天框收到“物品NBT解析失败”的提示。
    - "[ITEM] STONE 1 {invalid_nbt:true"
    # 5. ⚠️ 强制模式修复: 给予一个 NBT 缺少了首尾大括号的铁锭。预期结果：通过 force=true 自动修复，玩家成功收到名为“强制修复的铁锭”的物品。
    - '[ITEM] IRON_INGOT 1 "display":{"Name":"{\"text\":\"强制修复的铁锭\"}"} force=true'
    # 6. ✅ 空 NBT: 给予一个带有空 NBT 的泥土。预期结果：玩家收到一个普通的泥土。
    - "[ITEM] DIRT 1 {}"

    # 签到积分奖励
    - "[POINTS] 64" # 64积分
    - "[POINTS] 64 z" # 64积分
    - "[POINTS] 1..5 .2f" # 1<= x <= 5 保留两位小数 e.g. 1.23
    - "[POINTS] 1..5 .1f" # 1<= x <= 5 保留一位小数 e.g. 1.2
    - "[POINTS] 1..5 .3f" # 1<= x <= 5 最多保留两位小数 e.g. 1.23
    - "[POINTS] 1..5 z" # 1<= x <= 5 整数 e.g. 2

    # 概率奖励
    - "[PROB=0.25] [COMMAND] give %player_name% diamond 1" #25% 概率执行

    # 互斥奖励
    - "[RANDOM_PICK=2]" # 从 3 个奖励里 随机抽取 2 个不同的。
    - "[COMMAND] give %player_name% apple 10"
    - "[COMMAND] give %player_name% diamond 1"
    - "[COMMAND] give %player_name% emerald 5"
    - "[/RANDOM_PICK]"

    # 权重奖励
    - "[RANDOM_WEIGHTED]"
    - "[WEIGHT=60] [COMMAND] give %player_name% apple 10"
    - "[WEIGHT=30] [COMMAND] give %player_name% diamond 1"
    - "[WEIGHT=10] [COMMAND] give %player_name% nether_star 1"
    - "[/RANDOM_WEIGHTED]"

    # # 嵌套用法
    - "[PROB=0.5] [COMMAND] give %player_name% bread 1"
    - "[RANDOM_WEIGHTED]"
    - "[WEIGHT=80] [COMMAND] give %player_name% apple 5"
    - "[WEIGHT=15] [COMMAND] give %player_name% diamond 1"
    - "[WEIGHT=5] [COMMAND] give %player_name% netherite_ingot 1"
    - "[/RANDOM_WEIGHTED]"
    - "[SLEEP] 20"
    - "[MESSAGE] 恭喜你完成签到！"

######################################################### 
# 累计签到、连续奖励 
# - enable: 是否启用 
# - times: 次数 
######################################################### 
cumulative: 
  - enable: false 
  - times: 7 
    actions: 
      - "[COMMAND] give %player_name% iron_ingot 10" 
      - "[MESSAGE] 恭喜你累计签到7天，获得10个铁锭！" 
  - times: 30 
    actions: 
      - "[COMMAND] give %player_name% diamond 2" 
      - "[TITLE] 累计签到30天|奖励钻石x2" 
  - times: 100 
    actions: 
      - "[COMMAND] give %player_name% nether_star 1" 
      - "[BROADCAST] %player_name% 累计签到100天，获得传说奖励！" 
streak: 
  - enable: false 
  - times: 3 
    actions: 
      - "[COMMAND] give %player_name% apple 5" 
      - "[MESSAGE] 连续签到3天，送你5个苹果！" 
  - times: 7 
    actions: 
      - "[COMMAND] give %player_name% golden_apple 1" 
      - "[MESSAGE] 连续签到7天，奖励金苹果1个！" 

######################################################### 
# 排行奖励 (额外奖励，不会替代默认奖励) 
# 根据当天签到排名发放额外奖励 
# - enable: 是否启用 
# - rank: 排名 
######################################################### 
top: 
  - enable: false 
  - rank: 1 
    actions: 
      - "[COMMAND] give %player_name% apple 64" 
  - rank: 2 
    actions: 
      - '[COMMAND] give %player_name% diamond_sword 1' 
  - rank: 3 
    actions: 
      - "[COMMAND] give %player_name% emerald 64" 

######################################################### 
# 特殊日期签到奖励 
# - 支持指定日期/每年/每月/每周 
# - date: "yyyy-MM-dd" | "*-MM-dd" | "*-*-dd" | "Monday" | "Tuesday" | "Wednesday" | "Thursday" | "Friday" | "Saturday" | "Sunday" 
# - repeat: 是否允许重复 
# - repeat_time: 重复次数 (仅 repeat=true 时有效) 
######################################################### 
special_dates: 
  - date: "2025-01-01" # 指定某一天 
    message: "Happy New Year!" 
    actions: 
      - "[ITEM] apple 64" 

  - date: "*-01-01" # 每年的 1 月 1 日 
    message: "Happy New Year!" 
    repeat: true 
    repeat_time: 2 

  - date: "*-*-14" # 每月的 14 日 
    message: "Happy 14th" 
    repeat: false 

  - date: "Thursday" 
    message: "Crazy Thursday!" 
    repeat: true 
    repeat_time: 6 

######################################################### 
# Web API 配置 
# 说明: 
#   - 提供外部签到接口 (WIP) 
#   - 提供外部查询接口 (是否签到 / 总天数 / 连续签到等) 
#   - 启用后请设置防火墙或鉴权以防滥用 
######################################################### 
web_api: 
  enable_web_api: false # 是否启用 Web API 
  web_api_address: 0.0.0.0 # 监听地址 
  web_api_port: 7999 # 端口 
  web_api_endpoint: /api # 接口前缀 

######################################################### 
# 自动签到配置 
# 玩家登录时是否自动签到 
######################################################### 
auto_check_in_on_login: 
  enable: false 

#########################################################
# 插件基础配置
# message_prefix: 插件消息前缀
# timezone: 详情可见 https://www.zeitverschiebung.net/cn/all-time-zones.html
# language: 多语言 (zh_CN / en_US)  (WIP)
# bState: 是否启用bState统计
# debug: 是否启用调试模式 (输出更多日志)
#########################################################
message_prefix: "&7[&a签到Plus&7] "
timezone: "Asia/Shanghai"
language: zh_CN
bState: true
debug: false